<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>统计分析管理</title>
</head>
<body>
<div class="container-fluid face-table-group">
    <div class="row">
        <div class="form-inline face-form" id="my-button">
            <div class="form-group">
                <select id="u_unit_id" class="form-control">
                    <option value="-1">单位名称</option>

                </select>
            </div>
            <div class="form-group">
                <select id="area_id" class="form-control">
                    <option value="-1">行政区域</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                </select>
            </div>
            <div class="form-group">
                <select id="u_type" class="form-control">
                    <option value="-1">账户类别</option>
                    <option value="0">APP</option>
                    <option value="1">后台</option>
                    <option value="2">通用</option>
                </select>
            </div>
            <div class="form-group">
                <!--  <label for>角色</label>-->
                <select id="u_role_id" class="form-control">
                    <option value="-1">角色</option>
                    <option value="0">政府</option>
                    <option value="-1">团体</option>

                </select>
            </div>
            <div class="form-group">
                <select id="dateStatus" class="form-control">
                    <option value="-1">到期状态</option>
                    <option value="0">即将到期</option>
                    <option value="1">未到期</option>
                    <option value="2">已到期</option>
                </select>
            </div>
            <div class="form-group">
                <select id="u_status" class="form-control"
                        onchange="if(this.value=='Y'){document.getElementById('dateStatus').disabled=false;}else{document.getElementById('dateStatus').disabled=true;}">
                    <option value="A">用户状态</option>
                    <option value="Y">正常用户</option>
                    <option value="N">停用用户</option>
                </select>
            </div>
            <div class="form-group">
                <input type="text" placeholder="用户名" id="u_real_name" class="form-control">
            </div>
            <div class="form-group">
                <button class="btn face-button" onclick="getTable1()" style="background:#226ed4">
                    <span class="glyphicon glyphicon-search"></span>
                    搜索
                </button>
                <button class="btn face-button2" onclick="reset()" style="background:#e76361">
                    <span class="glyphicon glyphicon-repeat"></span>
                    重置
                </button>
            </div>
        </div>
    </div>
    <div class="row">
        <table id="userTable" data-show-header="true"
               data-show-refresh="false" data-pagination="true"
               data-side-pagination="server" data-page-list="[10, 20, 100, 1000]"
               data-page-size="10" class="table table-striped face-table" data-checkbox="true">
            <thead>
            <tr>
                <th data-field="uRealName" data-halign="center" data-align="center"
                    data-valign="middle">姓名
                </th>

                <th data-field="uSex" data-halign="center" data-align="center"
                    data-valign="middle">性别
                </th>

                <th data-field="uCardId" data-halign="center" data-align="center"
                    data-valign="middle">证件号
                </th>

                <th data-field="uUnitId" data-halign="center" data-align="center"
                    data-valign="middle">单位
                </th>

                <th data-field="uDuty" data-halign="center" data-align="center"
                    data-valign="middle">职务
                </th>

                <th data-field="uPolicyNum" data-halign="center"
                    data-align="center" data-valign="middle">警号
                </th>

                <th data-field="dArea" data-halign="center" data-align="center"
                    data-valign="middle">行政区域
                </th>

                <th data-field="uType" data-halign="center" data-align="center"
                    data-valign="middle" data-formatter="typeFormatter">账户类别
                </th>

                <th data-field="uStatus" data-halign="center" data-align="center"
                    data-valign="middle" data-formatter="statusFormatter">用户状态
                </th>

                <th data-field="expireTime" data-halign="center"
                    data-align="center" data-valign="middle">账户到期时间
                </th>
            </tr>
            </thead>
            <tbody id="userBody">
            </tbody>
        </table>
    </div>
</div>
</body>
<script id="imgTemp" type="text/html">
    <div class="col-sm-4 col-md-3 col-lg-2">
        <div class="thumbnail {{= focus==''?'':' focus'}}">
            <img src={{= url}} alt="...">
            <div class="caption">
                <p>姓名：{{= name}}</p>
                <p>年龄：{{= age}}</p>
                <p>性别：{{= sex}}</p>
                <p>地区：{{= address}}</p>
                <p class="hidden">身份证号：{{= idno}}</p>
                {{if focus}}
                <p class="hidden focus-font">重点人员情况：{{= focus}}'</p>
                {{/if}}
            </div>
        </div>
    </div>
</script>
<script>
    $(function () {
        getTable1();
        /* $(".face-table button[title='Export data']").removeClass("btn-default");
         $(".face-table button[title='Export data']").addClass("face-button"); */
    });
    function getTable1() {
        $("#userTable").bootstrapTable('destroy');
        var u_unit_id = $("#u_unit_id").val();
        var area_id = $("#area_id").val();
        var u_type = $("#u_type").val();
        var u_role_id = $("#u_role_id").val();
        var dateStatus = $("#dateStatus").val();
        var u_real_name = $("#u_real_name").val();
        var u_status = $("#u_status").val();
        $("#userTable").bootstrapTable(
            {
                method: "post",
                url: pathurl + "user/selectUsers?u_unit_id=" + u_unit_id
                + "&area_id=" + area_id + "&u_type=" + u_type
                + "&u_role_id=" + u_role_id + "&dateStatus="
                + dateStatus + "&u_real_name=" + u_real_name
                + "&u_status=" + u_status,
                pagination: true,
                toolbar: '#my-button',
                contentType: "application/x-www-form-urlencoded",
                queryParamsType: " limit",
                paginationDetailHAlign: "left",
                //paginationPreText : "上一页",
                //paginationNextText : "下一页",
                searchOnEnterKey: true,
                buttonsClass: "face",
                showExport: true,           //是否显示导出
                exportDataType: "basic"      //basic', 'all', 'selected'.
            });
    }

    function typeFormatter(value) {
        switch (value) {
            case 0:
                return "APP";
            case 1:
                return "后台";
            case 2:
                return "通用";
        }
    }
    function statusFormatter(value) {
        switch (value) {
            case 'Y':
                return "正常用户";
            case 'N':
                return "停用用户";
        }
    }
    function reset() {
        $(".face-form select").val("-1");
        $('#u_status').val('Y')
    }

</script>
</html>