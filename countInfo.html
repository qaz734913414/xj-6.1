<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv=”Access-Control-Allow-Origin” content=”*”>
    <title>统计分析管理</title>
    <!-- <link rel="shortcut icon" href="/FaceManage/resources/img/fa.ico"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <link href="./css/bootstrap.css" rel="stylesheet">
    <!-- bootstrap-table样式文件 -->
    <link href="./css/bootstrap-table.min.css" rel="stylesheet"/>
    <!-- bootstrap日历样式文件 -->
    <link href="./css/bootstrap-datetimepicker.css" rel="stylesheet"/>
    <!-- 字体图标 -->
    <link href="./css/font-awesome.css" rel="stylesheet"/>
    <!-- 主页样式文件 -->
    <link href="./css/index.css" rel="stylesheet"/>
    <!-- 人脸检索日志样式文件 -->
    <link href="./css/style.css" rel="stylesheet"/>

    <script src="./js/jquery-2.1.0.min.js" charset="utf-8"></script>
    <!-- 模板循环 -->
    <script src="./js/jquery.tmpl.min.js" charset="utf-8"></script>
    <!-- bootstrap主文件 -->
    <script src="./js/bootstrap.min.js" charset="utf-8"></script>
    <!-- bootstrap日历 -->
    <script src="./js/bootstrap-datetimepicker.js"></script>
    <script src="./js/bootstrap-datetimepicker.zh-CN.js" charset="utf-8"></script>
    <!-- bootstrapTable中文表格 -->
    <script src="./js/bootstrap-table.min.js" charset="utf-8"></script>
    <script src="./js/bootstrap-table-zh-CN.min.js" charset="utf-8"></script>


</head>

<body>
<!-- 自定义一级导航栏 -->
<div class="mynav-box-blank">
    <div class="mynav-box first-box">
        <ul class="mynav-menu">
            <li class="logo">
                <a href="##"><img src="./img/index/logo_home.png" alt="人脸识别后台管理系统"></a>
            </li>
            <li class="foot dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><b class="caret"></b>
            </a>
                <ul class="dropdown-menu">
                    <li><a href="./login.html">切换账号</a></li>
                    <li><a href="#">系统设置</a></li>
                </ul>
            </li>
            <li class="foot user">
                <p>admin,您好</p>
            </li>

            <li class="foot user-logo"><img src="./img/index/user.png" alt="人脸识别后台管理系统">
            </li>
            <li class="foot time">
                <p id="topDate"></p>
            </li>
        </ul>
    </div>
</div>
<!-- 自定义二级导航栏 -->
<div class="mynav-box-blank second-box-blank">
    <div class="mynav-box second-box ">
        <ul class="mynav-menu"></ul>
    </div>
</div>
<div class="face-box" id="ajax-content">
    <!--用户信息统计1以下-->
    <div class="container-fluid face-table-group">
        <div class="row">
            <div class="form-inline face-form" id="my-button">
                <div class="form-group">
                    <select id="u_unit_id" class="form-control">
                        <option value="-1">单位名称</option>

                    </select>
                </div>
                <div class="form-group">
                    <select id="area_id" class="form-control">
                        <option value="-1">行政区域</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                    </select>
                </div>
                <div class="form-group">
                    <select id="u_type" class="form-control">
                        <option value="-1">账户类别</option>
                        <option value="0">APP</option>
                        <option value="1">后台</option>
                        <option value="2">通用</option>
                    </select>
                </div>
                <div class="form-group">
                    <!--  <label for>角色</label>-->
                    <select id="u_role_id" class="form-control">
                        <option value="-1">角色</option>
                        <option value="0">政府</option>
                        <option value="-1">团体</option>

                    </select>
                </div>
                <div class="form-group">
                    <select id="dateStatus" class="form-control">
                        <option value="-1">到期状态</option>
                        <option value="0">即将到期</option>
                        <option value="1">未到期</option>
                        <option value="2">已到期</option>
                    </select>
                </div>
                <div class="form-group">
                    <select id="u_status" class="form-control"
                            onchange="if(this.value=='Y'){document.getElementById('dateStatus').disabled=false;}else{document.getElementById('dateStatus').disabled=true;}">
                        <option value="A">用户状态</option>
                        <option value="Y">正常用户</option>
                        <option value="N">停用用户</option>
                    </select>
                </div>
                <div class="form-group">
                    <input type="text" placeholder="用户名" id="u_real_name" class="form-control">
                </div>
                <div class="form-group">
                    <button class="btn face-button" onclick="getTable1()" style="background:#226ed4">
                        <span class="glyphicon glyphicon-search"></span>
                        搜索
                    </button>
                    <button class="btn face-button2" onclick="reset()" style="background:#e76361">
                        <span class="glyphicon glyphicon-repeat"></span>
                        重置
                    </button>
                </div>
            </div>
        </div>
        <div class="row">
            <table id="userTable" data-show-header="true"
                   data-show-refresh="false" data-pagination="true"
                   data-side-pagination="server" data-page-list="[10, 20, 100, 1000]"
                   data-page-size="10" class="table table-striped face-table" data-checkbox="true">
                <thead>
                <tr>
                    <th data-field="uRealName" data-halign="center" data-align="center"
                        data-valign="middle">姓名
                    </th>

                    <th data-field="uSex" data-halign="center" data-align="center"
                        data-valign="middle">性别
                    </th>

                    <th data-field="uCardId" data-halign="center" data-align="center"
                        data-valign="middle">证件号
                    </th>

                    <th data-field="uUnitId" data-halign="center" data-align="center"
                        data-valign="middle">单位
                    </th>

                    <th data-field="uDuty" data-halign="center" data-align="center"
                        data-valign="middle">职务
                    </th>

                    <th data-field="uPolicyNum" data-halign="center"
                        data-align="center" data-valign="middle">警号
                    </th>

                    <th data-field="dArea" data-halign="center" data-align="center"
                        data-valign="middle">行政区域
                    </th>

                    <th data-field="uType" data-halign="center" data-align="center"
                        data-valign="middle" data-formatter="typeFormatter">账户类别
                    </th>

                    <th data-field="uStatus" data-halign="center" data-align="center"
                        data-valign="middle" data-formatter="statusFormatter">用户状态
                    </th>

                    <th data-field="expireTime" data-halign="center"
                        data-align="center" data-valign="middle">账户到期时间
                    </th>
                </tr>
                </thead>
                <tbody id="userBody">
                </tbody>
            </table>
        </div>
    </div>

    <!--用户信息统计1以上-->
    <!-- 用户操作统计2 以下-->
    <div class="container-fluid face-table-group">
        <div class="row">
            <div class="form-inline face-form">
                <div class="form-group">
                    <select id="timestatus" class="form-control" onchange="changeTime()">
                        <option value="-1">统计方式</option>
                        <option value="0">按年统计</option>
                        <option value="1">按月统计</option>
                        <option value="2">按天统计</option>
                        <option value="3">按时统计</option>
                    </select>
                </div>
                <div class="form-group mydate">
                    <input size="16" type="text" value="" readonly id="startDate" class="form-control"
                           placeholder="开始时间">
                    <input size="16" type="text" value="" readonly id="endDate" class="form-control" placeholder="结束时间">
                </div>
                <div class="form-group">
                    <select id="fashion" class="form-control" onchange="changeTable()">
                        <option value="-1">统计业务</option>
                        <option value="0">人脸检索管理</option>
                        <option value="1">人脸日志管理</option>
                        <option value="2">统计分析管理</option>
                        <option value="3">配置中心</option>
                    </select>
                </div>
                <div class="form-group button-group">
                    <button class="btn face-button" onclick="getMessage2()" id="btn-query"><span class="fa fa-search"
                                                                                                 aria-hidden="true"></span>搜索
                    </button>
                    <button class="btn face-button2" onclick="reset2()" id="btn-reset"><span class="fa fa-search"
                                                                                             aria-hidden="true"></span>重置
                    </button>
                </div>
            </div>
        </div>
        <div class="row tablediv">
            <table id="first" data-show-header="true" data-show-refresh="false"


                   data-pagination="true" data-side-pagination="server"
                   data-page-list="[10, 20, 50, 100, ALL]" data-page-size="10"
                   class="table table-striped face-table">
                <thead>
                <tr>
                    <th data-field="date" data-halign="center" data-align="center" data-valign="middle">起始时间</th>
                    <th data-field="menu2" data-halign="center" data-align="center" data-valign="middle">人脸检索管理</th>
                    <th data-field="menu3" data-halign="center" data-align="center" data-valign="middle">人脸日志管理</th>
                    <th data-field="menu4" data-halign="center" data-align="center" data-valign="middle">统计分析管理</th>
                    <th data-field="menu5" data-halign="center" data-align="center" data-valign="middle">配置中心</th>
                </tr>
                </thead>
                <tbody id="firstBody">
                </tbody>
            </table>
            <table id="second" data-show-header="true" data-show-refresh="false"
                   data-pagination="true" data-side-pagination="server"
                   data-page-list="[10, 20, 50, 100, ALL]" data-page-size="10"
                   class="table table-striped">
                <thead>
                <tr>
                    <th data-field="date" data-halign="center" data-align="center" data-valign="middle">起始时间</th>
                    <th data-field="menu6" data-halign="center" data-align="center" data-valign="middle">人脸检索</th>
                    <th data-field="menu7" data-halign="center" data-align="center" data-valign="middle">身份检索</th>
                    <th data-field="menu8" data-halign="center" data-align="center" data-valign="middle">人脸比对</th>
                    <th data-field="menu9" data-halign="center" data-align="center" data-valign="middle">人脸多图比对</th>
                    <th data-field="menu10" data-halign="center" data-align="center" data-valign="middle">动态布控</th>
                </tr>
                </thead>
                <tbody id="secondBody">
                </tbody>
            </table>
            <table id="third" data-show-header="true" data-show-refresh="false"
                   data-pagination="true" data-side-pagination="server"
                   data-page-list="[10, 20, 50, 100, ALL]" data-page-size="10"
                   class="table table-striped">
                <thead>
                <tr>
                    <th data-field="date" data-halign="center" data-align="center" data-valign="middle">起始时间</th>
                    <th data-field="menu11" data-halign="center" data-align="center" data-valign="middle">人脸检索日志</th>
                    <th data-field="menu12" data-halign="center" data-align="center" data-valign="middle">身份检索日志</th>
                    <th data-field="menu13" data-halign="center" data-align="center" data-valign="middle">人脸比对日志</th>
                </tr>
                </thead>
                <tbody id="thirdBody">
                </tbody>
            </table>
            <table id="four" data-show-header="true" data-show-refresh="false"
                   data-pagination="true" data-side-pagination="server"
                   data-page-list="[10, 20, 50, 100, ALL]" data-page-size="10"
                   class="table table-striped">
                <thead>
                <tr>
                    <th data-field="date" data-halign="center" data-align="center" data-valign="middle">起始时间</th>
                    <th data-field="menu14" data-halign="center" data-align="center" data-valign="middle">用户信息统计</th>
                    <th data-field="menu15" data-halign="center" data-align="center" data-valign="middle">用户操作统计</th>
                    <th data-field="menu16" data-halign="center" data-align="center" data-valign="middle">比中率统计</th>
                    <th data-field="menu17" data-halign="center" data-align="center" data-valign="middle">身份查询</th>
                </tr>
                </thead>
                <tbody id="countBody">
                </tbody>
            </table>
            <table id="five" data-show-header="true" data-show-refresh="false"
                   data-pagination="true" data-side-pagination="server"
                   data-page-list="[10, 20, 50, 100, ALL]" data-page-size="10"
                   class="table table-striped face-table">
                <thead>
                <tr>
                    <th data-field="date" data-halign="center" data-align="center" data-valign="middle">起始时间</th>
                    <th data-field="menu18" data-halign="center" data-align="center" data-valign="middle">用户管理</th>
                    <th data-field="menu19" data-halign="center" data-align="center" data-valign="middle">组织机构管理</th>
                    <th data-field="menu20" data-halign="center" data-align="center" data-valign="middle">角色管理</th>
                    <th data-field="menu21" data-halign="center" data-align="center" data-valign="middle">系统设置</th>
                    <th data-field="menu22" data-halign="center" data-align="center" data-valign="middle">接入平台</th>
                    <th data-field="menu23" data-halign="center" data-align="center" data-valign="middle">设备管理</th>
                    <th data-field="menu24" data-halign="center" data-align="center" data-valign="middle">服务状态</th>
                    <th data-field="menu25" data-halign="center" data-align="center" data-valign="middle">系统日志</th>
                    <th data-field="menu26" data-halign="center" data-align="center" data-valign="middle">人脸库管理</th>
                    <th data-field="menu27" data-halign="center" data-align="center" data-valign="middle">消息推送</th>
                    <th data-field="menu28" data-halign="center" data-align="center" data-valign="middle">问题反馈</th>
                </tr>
                </thead>
                <tbody id="countBody">
                </tbody>
            </table>
        </div>
    </div>
    <!-- 用户操作统计2 以上-->
    <!-- 比中率统计3 以下-->
    <div class="container-fluid face-table-group">
        <div class="row">
            <div class="form-inline face-form">
                <div class="form-group">
                    <select id="timestatus" class="form-control" onchange="changeTime()">
                        <option value="-1">统计方式</option>
                        <option value="0">按年统计</option>
                        <option value="1">按月统计</option>
                        <option value="2">按天统计</option>
                        <option value="3">按时统计</option>
                    </select>
                </div>
                <div class="form-group mydate">
                    <input size="22" type="text" value="" readonly id="startDate" class="form-control"
                           placeholder="开始时间">
                    <input size="22" type="text" value="" readonly id="endDate" class="form-control" placeholder="结束时间">
                </div>
                <div class="form-group button-group">
                    <button class="btn face-button" onclick="getMessage3()" id="btn-query"><span class="fa fa-search"
                                                                                                 aria-hidden="true"></span>搜索
                    </button>
                    <button class="btn face-button2" onclick="reset3()" id="btn-reset"><span class="fa fa-search"
                                                                                             aria-hidden="true"></span>重置
                    </button>
                </div>
            </div>
        </div>
        <div class="row tablediv">
            <table id="proportion" data-show-header="true" data-show-refresh="false"
                   data-pagination="true" data-side-pagination="server"
                   data-page-list="[10, 20, 50, 100, ALL]" data-page-size="10"
                   class="table table-striped">
                <thead>
                <tr>
                    <th data-field="date" data-halign="center" data-align="center" data-valign="middle">起始时间</th>
                    <th data-field="plat" data-halign="center" data-align="center" data-valign="middle">平台比中数</th>
                    <th data-field="platcount" data-halign="center" data-align="center" data-valign="middle">平台比对数</th>
                    <th data-field="platper" data-halign="center" data-align="center" data-valign="middle">平台准确率</th>
                    <th data-field="app" data-halign="center" data-align="center" data-valign="middle">app比中数</th>
                    <th data-field="appcount" data-halign="center" data-align="center" data-valign="middle">app比对量</th>
                    <th data-field="appper" data-halign="center" data-align="center" data-valign="middle">app准确率</th>
                </tr>
                </thead>
                <tbody id="countBody3">
                </tbody>
            </table>
        </div>
    </div>
    <!-- 比中率统计3 以上-->
    <!-- 身份查询4 以下-->

    <div class="container-fluid face-table-group">
        <div class=" row">
            <div class="form-inline face-form">
                <div class="form-group">
                    <input id="idno" size="22" type="text" value="" class="form-control" placeholder="身份证号">
                    <input id="name" size="22" type="text" value="" class="form-control" placeholder="姓名">
                </div>
                <div class="form-group button-group">
                    <button class="btn face-button" onclick="getMessage4()" id="btn-query"><span class="fa fa-search"
                                                                                                 aria-hidden="true"></span>搜索
                    </button>
                    <button class="btn face-button2" onclick="reset4()" id="btn-reset"><span class="fa fa-search"
                                                                                             aria-hidden="true"></span>重置
                    </button>
                </div>
            </div>

            <div class="row result-box ">
                <div class="container-fluid">
                    <div class="row">

                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="retrieveModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span
                            class="fa fa-times" aria-hidden="true"></span></button>
                    <h4 class="modal-title">身份查询详情</h4>
                </div>
                <div class="modal-body">
                    <div class="row">

                        <div class="col-sm-4 col-md-4 col-lg-4 text-center show-results">
                            <button type="button" class="btn left-btn"><span class="fa  fa-chevron-left"></span>
                            </button>
                            <h4>查询结果</h4>
                            <button type="button" class="btn right-btn"><span class="fa  fa-chevron-right"
                                                                              aria-hidden="true"></span>
                            </button>
                            <div class="thumbnail">
                                <img id="modal-img" src="./img/default_img.png" alt="...">
                            </div>
                        </div>
                        <div class="col-sm-3 col-md-3 col-lg-3 items">
                            <h4 class="text-center">身份信息详情</h4>
                            <h4> &nbsp;</h4>
                            <div class="caption">
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal -->
    </div>


</div>
<!-- 身份查询 以上-->

<!-- 提示框 以下-->
<div class="modal fade face-modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" style="margin: 10% auto;width: 20%;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="myModalLabel"></h4>
            </div>
            <div class="modal-body" style="text-align:center;" id="modal-body-id"></div>
            <div class="modal-footer" style="text-align:center;">
                <button type="button" class="btn btn-primary" data-dismiss="modal">知道了
                </button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal -->
</div>

</body>

<script type="text/javascript" src="./js/index.js"></script>
<script id="imgTemp" type="text/html">
    <div class="col-sm-4 col-md-3 col-lg-2">
        <div class="thumbnail {{= focus==''?'':' focus'}}">
            <img src={{= url}} alt="...">
            <div class="caption">
                <p>姓名：{{= name}}</p>
                <p>年龄：{{= age}}</p>
                <p>性别：{{= sex}}</p>
                <p>地区：{{= address}}</p>
                <p class="hidden">身份证号：{{= idno}}</p>
                {{if focus}}
                <p class="hidden focus-font">重点人员情况：{{= focus}}'</p>
                {{/if}}
            </div>
        </div>
    </div>
</script>
<script type="text/javascript">
    $('#ajax-content>div').hide();
    //   公共路径-----------------
    var pathurl = 'http://192.168.0.169:8080/FaceManage/'

    $(function () {
        getTable1();
        /* $(".face-table button[title='Export data']").removeClass("btn-default");
         $(".face-table button[title='Export data']").addClass("face-button"); */
    });
    function getTable1() {
        $("#userTable").bootstrapTable('destroy');
        var u_unit_id = $("#u_unit_id").val();
        var area_id = $("#area_id").val();
        var u_type = $("#u_type").val();
        var u_role_id = $("#u_role_id").val();
        var dateStatus = $("#dateStatus").val();
        var u_real_name = $("#u_real_name").val();
        var u_status = $("#u_status").val();
        $("#userTable").bootstrapTable(
            {
                method: "post",
                url: pathurl + "user/selectUsers?u_unit_id=" + u_unit_id
                + "&area_id=" + area_id + "&u_type=" + u_type
                + "&u_role_id=" + u_role_id + "&dateStatus="
                + dateStatus + "&u_real_name=" + u_real_name
                + "&u_status=" + u_status,
                pagination: true,
                toolbar: '#my-button',
                contentType: "application/x-www-form-urlencoded",
                queryParamsType: " limit",
                paginationDetailHAlign: "left",
                //paginationPreText : "上一页",
                //paginationNextText : "下一页",
                searchOnEnterKey: true,
                buttonsClass: "face",
                showExport: true,           //是否显示导出
                exportDataType: "basic"      //basic', 'all', 'selected'.
            });
    }

    function typeFormatter(value) {
        switch (value) {
            case 0:
                return "APP";
            case 1:
                return "后台";
            case 2:
                return "通用";
        }
    }
    function statusFormatter(value) {
        switch (value) {
            case 'Y':
                return "正常用户";
            case 'N':
                return "停用用户";
        }
    }
    function reset() {
        $(".face-form select").val("-1");
        $('#u_status').val('Y')
    }

    //用户信息统计1以上---------
    //用户操作2以下---------

    getMessage2();
    $(".mydate input").datetimepicker({
        format: 'yyyy-mm-dd hh:ii',
        language: 'zh-CN',
        autoclose: true,
        inputMask: true,
    });

    function changeTime() {
        var date = new Date();
        var y = date.getFullYear();
        var seperator1 = "-";
        var seperator2 = ":";
        var month = date.getMonth() + 1;
        var strDate = date.getDate();
        var hour = date.getHours();
        if (month >= 1 && month <= 9) {
            month = "0" + month;
        }
        if (strDate >= 0 && strDate <= 9) {
            strDate = "0" + strDate;
        }
        var m = date.getFullYear() + seperator1 + month;
        var d = date.getFullYear() + seperator1 + month + seperator1 + strDate;
        var h = date.getFullYear() + seperator1 + month + seperator1 + strDate + seperator1 + hour;
        var s = $("#timestatus").find("option:selected").val();
        if (s == 0) {
            $("#startDate").datetimepicker('remove');
            $("#endDate").datetimepicker('remove');
            getDateByYear(y);
        } else if (s == 1) {
            $("#startDate").datetimepicker('remove');
            $("#endDate").datetimepicker('remove');
            getDateByMonth(m);
        } else if (s == 2) {
            $("#startDate").datetimepicker('remove');
            $("#endDate").datetimepicker('remove');
            getDateByDay(d);
        } else {
            $("#startDate").datetimepicker('remove');
            $("#endDate").datetimepicker('remove');
            getDateByHour(h);
        }
    }
    function changeTable() {
        var f = $("#fashion").find("option:selected").val();
        if (f == 0) {
            $("#first").bootstrapTable('destroy');
            $("#third").bootstrapTable('destroy');
            $("#four").bootstrapTable('destroy');
            $("#five").bootstrapTable('destroy');
            $("#second").css("display", "");
            $("#first").css("display", "none");
            $("#third").css("display", "none");
            $("#four").css("display", "none");
            $("#five").css("display", "none");
        } else if (f == 1) {
            $("#first").bootstrapTable('destroy');
            $("#second").bootstrapTable('destroy');
            $("#four").bootstrapTable('destroy');
            $("#five").bootstrapTable('destroy');
            $("#third").css("display", "");
            $("#first").css("display", "none");
            $("#second").css("display", "none");
            $("#four").css("display", "none");
            $("#five").css("display", "none");
        } else if (f == 2) {
            $("#first").bootstrapTable('destroy');
            $("#third").bootstrapTable('destroy');
            $("#second").bootstrapTable('destroy');
            $("#five").bootstrapTable('destroy');
            $("#four").css("display", "");
            $("#first").css("display", "none");
            $("#second").css("display", "none");
            $("#third").css("display", "none");
            $("#five").css("display", "none");
        } else if (f == 3) {
            $("#first").bootstrapTable('destroy');
            $("#third").bootstrapTable('destroy');
            $("#four").bootstrapTable('destroy');
            $("#second").bootstrapTable('destroy');
            $("#five").css("display", "");
            $("#first").css("display", "none");
            $("#second").css("display", "none");
            $("#third").css("display", "none");
            $("#four").css("display", "none");
        } else {
            $("#second").bootstrapTable('destroy');
            $("#third").bootstrapTable('destroy');
            $("#four").bootstrapTable('destroy');
            $("#five").bootstrapTable('destroy');
            $("#first").css("display", "");
            $("#second").css("display", "none");
            $("#third").css("display", "none");
            $("#four").css("display", "none");
            $("#five").css("display", "none");
        }
    }
    function getMessage2() {
        changeTable();
        var start = $("#startDate").val();
        var end = $("#endDate").val();
        var type = $("#timestatus").find("option:selected").val();
        var fash = $("#fashion").find("option:selected").val();
        if (fash == 0) {
            SecondTable($("#second"), start, end, type, 0);
        } else if (fash == 1) {
            SecondTable($("#third"), start, end, type, 1);
        } else if (fash == 2) {
            SecondTable($("#four"), start, end, type, 2);
        } else if (fash == 3) {
            SecondTable($("#five"), start, end, type, 3);
        } else {
            SecondTable($("#first"), start, end, type, -1);
        }
    }
    function getDateByMonth() {
        //按月查询
        //$("#startDate").datetimepicker().format();
        $("#startDate").datetimepicker({
            format: "yyyy-mm",
            startView: 3,
            startDate: 3,
            todayHighlight: true,
            //showMeridian :true,
            autoclose: true,
            language: 'zh-CN',
            minView: 4,
            todayBtn: true,
        }).on("change", function (ev) {
            var start = $('#startDate').val();
            $('#endDate').datetimepicker('setStartDate', start);
            $('#startDate').datetimepicker('hide');
        });
        $("#endDate").datetimepicker({
            format: "yyyy-mm",
            startView: 3,
            showMeridian: true,
            autoclose: true,
            language: 'zh-CN',
            minView: 4,
            todayBtn: true,
        }).on("change", function (ev) {
            var end = $('#endDate').val();
            $('#startDate').datetimepicker('setEndDate', new Date());
            $('#endDate').datetimepicker('setStartDate', new Date());
        });
    }

    function getDateByYear(y) {
        //按年查询
        $("#startDate").datetimepicker({
            format: "yyyy",
            startView: 'decade',
            startDate: "2006",
            endDate: "2020",
            //todayHighlight:true,
            showMeridian: true,
            autoclose: true,
            language: 'zh-CN',
            minView: 'decade',
            //todayBtn:true,
        });
        /*.on("changeYear",function(ev){
         $("#startDate").datetimepicker('setStartDate',y-10);
         $("#startDate").datetimepicker('setEndDate',$('#endDate').val());
         })*/
        $("#endDate").datetimepicker({
            format: "yyyy",
            startView: 'decade',
            showMeridian: true,
            autoclose: true,
            language: 'zh-CN',
            minView: 'decade',
            todayBtn: true,
        }).on("change", function (ev) {
            var end = $('#endDate').val();
            $('#endDate').datetimepicker('setStartDate', $('#startDate').val());
            $('#endDate').datetimepicker('setEndDate', y);
        });
    }
    function getDateByDay() {
        //按天查询
        $("#startDate").datetimepicker({
            format: "yyyy-mm-dd",
            startDate: 4,
            todayHighlight: true,
            showMeridian: true,
            autoclose: true,
            language: 'zh-CN',
            minView: 2,
            todayBtn: true,
        }).on("change", function (ev) {
            var start = $('#startDate').val();
            $('#endDate').datetimepicker('setStartDate', start);
            $('#startDate').datetimepicker('hide');
        });
        $("#endDate").datetimepicker({
            format: "yyyy-mm-dd",
            showMeridian: true,
            autoclose: true,
            language: 'zh-CN',
            minView: 2,
            todayBtn: true,
        }).on("change", function (ev) {
            var end = $('#endDate').val();
            $('#startDate').datetimepicker('setEndDate', new Date());
            $('#endDate').datetimepicker('setStartDate', new Date());
        });
    }
    function getDateByHour() {
        //按小时查询
        $("#startDate").datetimepicker({
            format: "yyyy-mm-dd-hh",
            todayHighlight: true,
            showMeridian: true,
            autoclose: true,
            inputMask: true,
            language: 'zh-CN',
            minView: 1,
            todayBtn: true,
        }).on("change", function (ev) {
            var start = $('#startDate').val();
            $('#endDate').datetimepicker('setStartDate', start);
            $('#startDate').datetimepicker('hide');
        });
        $("#endDate").datetimepicker({
            format: "yyyy-mm-dd-hh",
            showMeridian: true,
            autoclose: true,
            language: 'zh-CN',
            minView: 1,
            todayBtn: true,
        }).on("change", function (ev) {
            var end = $('#endDate').val();
            $('#startDate').datetimepicker('setEndDate', new Date());
            $('#endDate').datetimepicker('setStartDate', new Date());
        });
    }
    function SecondTable(t, start, end, type, fash) {
        t.bootstrapTable('destroy');
        t.bootstrapTable({
            method: "post",
            url: pathurl + "syslog/count?startDate=" + start + "&endDate=" + end + "&dateType=" + type + "&fashion=" + fash,
            pagination: true,
            contentType: "application/x-www-form-urlencoded",
            queryParamsType: " limit",
            paginationDetailHAlign: "left",
            buttonsClass: "face",
            //paginationPreText : "上一页",
            //paginationNextText : "下一页",
            searchOnEnterKey: true
        });
    }
    function reset2() {
        $(".face-form input").val("");
        $(".face-form select").val("-1");
        getMessage2();
    }
</script>
<!--用户操作2-以上----->
<!--比中率3-以下----->
<script type="text/javascript">

    getMessage3();


    function getMessage3() {
        var start = $("#startDate").val();
        var end = $("#endDate").val();
        var type = $("#timestatus").find("option:selected").val();
        getTable3(start, end, type);
    }

    function getTable3(start, end, type) {
        $("#proportion").bootstrapTable('destroy');
        $("#proportion").bootstrapTable({
            method: "post",
            url: pathurl + "syslog/proportioncount?startDate=" + start + "&endDate=" + end + "&dateType=" + type,
            pagination: true,
            contentType: "application/x-www-form-urlencoded",
            queryParamsType: " limit",
            paginationDetailHAlign: "left",
            //paginationPreText : "上一页",
            //paginationNextText : "下一页",
            searchOnEnterKey: true
        });
    }
    function reset3() {
        $(".face-form input").val("");
        $(".face-form select").val("-1");
        getMessage3();
    }
</script>
<!--比中率3-以上----->
<!--身份查询4-以下----->
<script type="text/javascript">
    var heightFactor = 1.2;
    function getMessage4() {
        var upload = $(this);
        upload.addClass("disabled");
        var form_Data = new FormData();
        form_Data.append("idno", $(".mydate #idno").val());
        form_Data.append("name", $(".mydate #name").val());
        $.ajax({
            type: 'post',
            url: pathurl + 'syslog/identityquery/',
            data: form_Data,
            cache: false,
            contentType: false,
            processData: false,
            dataType: 'json',
            success: function (data) {
                console.info(data);
                if (data.code == 0) {
                    $(".result-box .container-fluid .row").html("");//清空
                    var imgs = data.userlist;
                    var imgsDom = $(".result-box .container-fluid .row");
                    //排序
                    /* imgs.sort(function(a,b){
                     return b.percent-a.percent;
                     }); */
                    $('#imgTemp').tmpl(imgs).appendTo(imgsDom);
                    winChange();//调整高宽
                    //绑定图片点击事件
                    $(".result-box .thumbnail").bind('click', function () {
                        //var b=$(".result-box .thumbnail p").removeClass("hidden");
                        $("#retrieveModal").modal();
                        //赋值
                        showImageOnModal($(this));
                        //设置当前图片dom的索引，以便左右翻图
                        var imageDom = $(this);
                        //绑定左右切换事件
                        $("#retrieveModal .right-btn").bind("click", function () {
                            if (!imageDom.parent().next().find(".thumbnail img").attr("src")) {
                                return;
                            }
                            imageDom = imageDom.parent().next().find(".thumbnail");
                            showImageOnModal(imageDom);
                        });

                        $("#retrieveModal .left-btn").bind("click", function () {
                            if (!imageDom.parent().prev().find(".thumbnail img").attr("src")) {
                                return;
                            }
                            imageDom = imageDom.parent().prev().find(".thumbnail");
                            console.info(imageDom);
                            showImageOnModal(imageDom);
                        });
                        //绑定按钮事件
                        $("#retrieveModal .similar-box").bind("mouseover", function () {
                            $("#retrieveModal .similar-box > p:last-child").hide();
                            $("#retrieveModal .similar-box > p:first-child span").text("比 中");
                            $("#retrieveModal .similar-box").addClass("selected");
                        });
                        $("#retrieveModal .similar-box").bind("mouseout", function () {
                            $("#retrieveModal .similar-box > p:last-child").show();
                            $("#retrieveModal .similar-box > p:first-child span").text("相似度");
                            $("#retrieveModal .similar-box").removeClass("selected");
                        });
                        winChange();
                    });

                } else {
                    $("#modal-body-id").text("操作失败，请重试");
                    $("#myModal").modal();

                }

            },
            error: function () {

                console.error("ajax upload error");
            }
        });
    }

    function winChange() {

        //统一图片高度，防止不对齐
        var width = $(".result-box .thumbnail img").width();
        $(".result-box .thumbnail img").height(width * heightFactor);
        //图片对齐
        width = $("#retrieveModal .modal-body .thumbnail img").width();
        $("#retrieveModal .modal-body .thumbnail img").height(width * heightFactor);
        //按钮置园
        width = $("#retrieveModal .modal-body .similar-box").width();
        $("#retrieveModal .modal-body .similar-box").height(width);

        width = $(".add-img-box .thumbnail img").width();
        $(".add-img-box .thumbnail img").height(width * heightFactor);
        //图片框垂直居中

    }
    function showImageOnModal(resource) {
        $("#modal-img").attr("src", resource.find("img").attr("src"));
        $("#retrieveModal .similar-box p:last-child span").html(resource.find(".caption>p:first-child>span:last-child").html());
        $("#retrieveModal .caption").html(resource.find(".caption").html());
        $("#retrieveModal .caption .hidden").removeClass("hidden");
        //$("#retrieveModal .caption p:first-child").addClass("hidden");
        //重点人员
        if (resource.hasClass("focus")) {
            $("#retrieveModal .show-results .thumbnail").addClass("focus");
        } else {
            $("#retrieveModal .show-results .thumbnail").removeClass("focus");
        }
    }
    function reset4() {
        $(".face-form input").val("");
    }
</script>
</html>
